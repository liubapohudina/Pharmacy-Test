var e=function(e){return e.reduce(((e,t)=>e+parseFloat(t.price)*parseInt(t.quantity)),0).toFixed(2)};var t=function(t){const n=document.querySelectorAll("#counter button"),r=document.querySelector("#totalPrice");let a=e(t);r.innerHTML=`<p>Total price: ${a}</p>`,n.forEach((n=>{n.addEventListener("click",(()=>{const o=n.dataset.action,c=n.closest(".itemDrugsBasket"),i=c.querySelector("#value");let l=parseInt(i.textContent);if("increment"===o)l+=1;else if("decrement"===o)if(l>0)l-=1;else{const e=confirm("Error. Click cannot be a negative number");console.log(e)}i.textContent=l.toString();const s=c.id,u=t.find((e=>e._id===s));u.quantity=l,a=e(t),r.innerHTML=`<p>Total price: ${a}</p>`,u.total=a,localStorage.setItem("cartOrder",JSON.stringify(t))}))}))};function n(e){try{localStorage.setItem("cartOrders",JSON.stringify(e)),localStorage.removeItem("cartItems"),localStorage.removeItem("cartOrder")}catch(e){return alert(e),e}}document.querySelector("#drugs");const r=document.querySelector("#drugsBasket");document.querySelector(".contact-form").addEventListener("submit",(function(e){const t=e.target,r=t.elements.name.value,a=t.elements.email.value,o=t.elements.phone.value,c=t.elements.address.value;if(""===r||""===a||""===o||""===c)return console.log("Please fill in all the fields!");const i={name:r,email:a,phone:o,address:c},l=JSON.parse(localStorage.getItem("cartOrder"))||JSON.parse(localStorage.getItem("cartItems")),s=Date.now();let u=JSON.parse(localStorage.getItem("cartOrders"))||[];u.push({number:s,user:i,products:l}),n(u),t.reset()})),function(){try{let e=JSON.parse(localStorage.getItem("cartItems"))||[];if(e.length>0){const n=e.map((e=>{const t=e.image&&""!==e.image.trim()?e.image:"https://cdn1.iconfinder.com/data/icons/pikku-ui/16/image-512.png";return`<li class="itemDrugsBasket" id="${e._id}">\n                <img src="${t}" alt="${e.title}" loading="lazy" width="300"/>\n                <button class="btnDelete" type="button">X</button>\n                <div class="infoDrug"\n                <h3>${e.title}</h3>\n                <p id="price">${e.price}</p>\n                    <div id="counter">\n                    <button type="button" data-action="decrement">-1</button>\n                      <span id="value">1</span>\n                    <button type="button" data-action="increment">+1</button>\n                 </div>\n                </div>\n            </li>`})).join("");r.innerHTML=n,t(e),r.addEventListener("click",(function(e){if(e.target.classList.contains("btnDelete")){const t=e.target.closest("li");if(t){const e=t.getAttribute("id");let n=JSON.parse(localStorage.getItem("cartItems"))||[];n=n.filter((t=>t._id!==e)),localStorage.setItem("cartItems",JSON.stringify(n)),t.remove()}}}))}else r.innerHTML="<p>Basket is empty!Please add products</p>"}catch(e){return console.log(e),e}}();
//# sourceMappingURL=shopingCart.f62721c0.js.map
