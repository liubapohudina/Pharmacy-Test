!function(){var t=function(t){return t.reduce((function(t,e){return t+parseFloat(e.price)*parseInt(e.quantity)}),0).toFixed(2)};var e=function(e){var n=document.querySelectorAll("#counter button"),r=document.querySelector("#totalPrice"),a=t(e);r.innerHTML="<p>Total price: ".concat(a,"</p>"),n.forEach((function(n){n.addEventListener("click",(function(){var o=n.dataset.action,c=n.closest(".itemDrugsBasket"),i=c.querySelector("#value"),l=parseInt(i.textContent);if("increment"===o)l+=1;else if("decrement"===o)if(l>0)l-=1;else{var s=confirm("Error. Click cannot be a negative number");console.log(s)}i.textContent=l.toString();var u=c.id,d=e.find((function(t){return t._id===u}));d.quantity=l,a=t(e),r.innerHTML="<p>Total price: ".concat(a,"</p>"),d.total=a,localStorage.setItem("cartOrder",JSON.stringify(e))}))}))};function n(t){try{localStorage.setItem("cartOrders",JSON.stringify(t)),localStorage.removeItem("cartItems"),localStorage.removeItem("cartOrder")}catch(t){return alert(t),t}}document.querySelector("#drugs");var r=document.querySelector("#drugsBasket");document.querySelector(".contact-form").addEventListener("submit",(function(t){var e=t.target;console.log(e);var r=e.elements.name.value,a=e.elements.email.value,o=e.elements.phone.value,c=e.elements.address.value;if(""===r||""===a||""===o||""===c)return console.log("Please fill in all the fields!");var i={name:r,email:a,phone:o,address:c},l=JSON.parse(localStorage.getItem("cartOrder"))||JSON.parse(localStorage.getItem("cartItems")),s=Date.now(),u=JSON.parse(localStorage.getItem("cartOrders"))||[];u.push({number:s,user:i,products:l}),n(u),e.reset()})),function(){try{var t=JSON.parse(localStorage.getItem("cartItems"))||[];if(t.length>0){var n=t.map((function(t){var e=t.image&&""!==t.image.trim()?t.image:"https://cdn1.iconfinder.com/data/icons/pikku-ui/16/image-512.png";return'<li class="itemDrugsBasket" id="'.concat(t._id,'">\n                <img src="').concat(e,'" alt="').concat(t.title,'" loading="lazy" width="300"/>\n                <button class="btnDelete" type="button">X</button>\n                <div class="infoDrug"\n                <h3>').concat(t.title,'</h3>\n                <p id="price">').concat(t.price,'</p>\n                    <div id="counter">\n                    <button type="button" data-action="decrement">-1</button>\n                      <span id="value">1</span>\n                    <button type="button" data-action="increment">+1</button>\n                 </div>\n                </div>\n            </li>')})).join("");r.innerHTML=n,e(t),r.addEventListener("click",(function(t){if(t.target.classList.contains("btnDelete")){var e=t.target.closest("li");if(e){var n=e.getAttribute("id"),r=JSON.parse(localStorage.getItem("cartItems"))||[];r=r.filter((function(t){return t._id!==n})),localStorage.setItem("cartItems",JSON.stringify(r)),e.remove()}}}))}else r.innerHTML="<p>Basket is empty!Please add products</p>"}catch(t){return console.log(t),t}}()}();
//# sourceMappingURL=shopingCart.2057d62f.js.map
